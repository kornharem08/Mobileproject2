<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
        <script>
            document.addEventListener("deviceready", onDeviceReady, false);
    
            function onDeviceReady() {
                QRScanner.scan(displayContents);
    
    function displayContents(err, text){
      if(err){
        // an error occurred, or the scan was canceled (error code 6)
      } else {
        // The scan completed, display the contents of the QR code:
        localStorage.setItem("code", "text");
        QRScanner.hide();
        window.location.href="index.html";
      }
    }
    
    // Make the webview transparent so the video preview is visible behind it.
    QRScanner.show();
    
            }
    
    // function onDone(err, status){
    //   if (err) {
    //    console.error(err);
    //   }
    //   if (status.authorized) {
    //     console.error("Authorized");
    //     QRScanner.scan(displayContents);
    //     QRScanner.show();
    //   } else if (status.denied) {
    //   } else { 
    
    //   }
    // }
    // function displayContents(err, text){
    //   if(err){
    //     // an error occurred, or the scan was canceled (error code 6)
    //   } else {
    //     // The scan completed, display the contents of the QR code:
    //     alert(text);
    //   }
    // }
    
        </script>
    </body>
</html>